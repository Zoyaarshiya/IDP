!function(r,f,o,a){var l=r(f);r.fn.lazyload=function(t){console.log("lazyload fn");var n=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:f,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function e(){var e=0;n.each(function(){var t=r(this);if((!i.skip_invisible||t.is(":visible"))&&!r.abovethetop(this,i)&&!r.leftofbegin(this,i))if(r.belowthefold(this,i)||r.rightoffold(this,i)){if(++e>i.failure_limit)return!1}else t.trigger("appear"),e=0})}return t&&(a!==t.failurelimit&&(t.failure_limit=t.failurelimit,delete t.failurelimit),a!==t.effectspeed&&(t.effect_speed=t.effectspeed,delete t.effectspeed),r.extend(i,t)),t=i.container===a||i.container===f?l:r(i.container),0===i.event.indexOf("scroll")&&t.bind(i.event,e),this.each(function(){var e=this,o=r(e),t=r(e).attr("data-src");typeof t!=typeof a&&0!=t&&(i.data_attribute="src"),e.loaded=!1,o.attr("src")!==a&&!1!==o.attr("src")||o.is("img")&&o.attr("src",i.placeholder),o.one("appear",function(){var t;this.loaded||(i.appear&&(t=n.length,i.appear.call(e,t,i)),r("<img />").bind("load",function(){var t=o.attr("data-"+i.data_attribute);o.hide(),o.is("img")?o.attr("src",t):o.css("background-image","url('"+t+"')"),o[i.effect](i.effect_speed),e.loaded=!0;t=r.grep(n,function(t){return!t.loaded});n=r(t),i.load&&(t=n.length,i.load.call(e,t,i))}).attr("src",o.attr("data-"+i.data_attribute)))}),0!==i.event.indexOf("scroll")&&o.bind(i.event,function(){e.loaded||o.trigger("appear")})}),l.bind("resize",function(){e()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&l.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&n.each(function(){r(this).trigger("appear")})}),r(o).ready(function(){e()}),this},r.belowthefold=function(t,e){var o=e.container===a||e.container===f?(f.innerHeight||l.height())+l.scrollTop():r(e.container).offset().top+r(e.container).height();return o<=r(t).offset().top-e.threshold},r.rightoffold=function(t,e){var o=e.container===a||e.container===f?l.width()+l.scrollLeft():r(e.container).offset().left+r(e.container).width();return o<=r(t).offset().left-e.threshold},r.abovethetop=function(t,e){var o=e.container===a||e.container===f?l.scrollTop():r(e.container).offset().top;return o>=r(t).offset().top+e.threshold+r(t).height()},r.leftofbegin=function(t,e){var o=e.container===a||e.container===f?l.scrollLeft():r(e.container).offset().left;return o>=r(t).offset().left+e.threshold+r(t).width()},r.inviewport=function(t,e){return!(r.rightoffold(t,e)||r.leftofbegin(t,e)||r.belowthefold(t,e)||r.abovethetop(t,e))},r.extend(r.expr[":"],{"below-the-fold":function(t){return r.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!r.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return r.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!r.rightoffold(t,{threshold:0})},"in-viewport":function(t){return r.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!r.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return r.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!r.rightoffold(t,{threshold:0})}})}(jQuery,window,document);